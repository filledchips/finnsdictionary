<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Finn's English Dictionary</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #005f99, #b2ebf2);
      height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
      position: relative;
    }

    h1 {
      margin: 2rem 0 1rem;
      text-align: center;
      color: #e0f7fa;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
      font-size: 2.5rem;
      z-index: 2;
      position: relative;
    }

    .search-container {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
      z-index: 2;
      position: relative;
    }

    input[type="text"], button {
      padding: 0.7rem;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      outline: none;
    }

    input[type="text"] {
      width: 250px;
    }

    button {
      background-color: #006994;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #004e75;
    }

    #result {
      display: none;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(12px);
      border-radius: 15px;
      padding: 2rem;
      margin: 0 auto 3rem auto;
      width: 90%;
      max-width: 600px;
      color: white;
      z-index: 2;
      position: relative;
    }

    .word {
      font-size: 2rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .phonetic {
      font-style: italic;
      margin-top: 0.3rem;
    }

    .partOfSpeech {
      margin-top: 1rem;
      font-weight: bold;
      color: #b2ebf2;
    }

    .definition {
      margin-top: 0.5rem;
      padding-left: 1rem;
      line-height: 1.5;
    }

    .error {
      color: #ffcccb;
      margin-top: 1rem;
      text-align: center;
    }

    .speak-button {
      background-color: #00acc1;
      border: none;
      border-radius: 5px;
      padding: 0.3rem 0.7rem;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .speak-button:hover {
      background-color: #008ba3;
    }

    .bubble-container {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }

    .bubble {
      position: absolute;
      bottom: -50px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      animation: rise 15s linear infinite;
    }

    @keyframes rise {
      0% { transform: translateY(0) scale(1); opacity: 0.7; }
      100% { transform: translateY(-1200px) scale(0.5); opacity: 0; }
    }
  </style>
</head>
<body>

<div class="bubble-container" id="bubbles"></div>
<h1>Finn's English Dictionary</h1>

<div class="search-container">
  <input type="text" id="wordInput" placeholder="Enter a word..." autocomplete="off" />
  <button onclick="searchWord()">Search</button>
</div>

<div id="result"></div>

<script>
const resultDiv = document.getElementById("result");
const inputField = document.getElementById("wordInput");

const customDefinitions = {
  "proshipper": {
    partOfSpeech: "noun",
    definition: "A proshipper is someone who believes that any fictional ship is valid, even if the content is controversial or uncomfortable. They usually separate fiction from reality and enjoy exploring darker pairings without seeing it as real-life support."
  },
  "darkshipper": {
    partOfSpeech: "noun",
    definition: "A darkshipper is someone who likes or supports fictional relationships that revolve around dark or disturbing themes, such as obsession, horror or violence. They’re in it for the story and realism, not because they think it’s okay in real life."
  },
  "mlm": {
    partOfSpeech: "abbreviation",
    definition: "Stands for ‘male love male.’ It’s a casual way of referring to men (including trans men) being attracted to other men, or media/content focusing on that."
  },
  "wlw": {
    partOfSpeech: "abbreviation",
    definition: "Short for ‘woman love woman.’ Used to describe women who are attracted to women, or a relationship in media centered around sapphic/lesbian dynamics."
  },
  "comshipper": {
    partOfSpeech: "noun",
    definition: "Someone who enjoys complex and morally questionable fictional relationships. They usually appreciate intense narratives and don’t shy away from uncomfortable dynamics if it makes the story compelling."
  },
  "ships": {
    partOfSpeech: "noun",
    definition: "Short way of saying ‘relationships.’ In fandoms, it refers to pairing two characters together (romantically or platonically) and supporting that idea or dynamic."
  },
  "aroace": {
    partOfSpeech: "adjective/noun",
    definition: "Short for aromantic and asexual. Describes a person who rarely or never experiences romantic and sexual attraction."
  },
  "enby": {
    partOfSpeech: "noun",
    definition: "A casual or shortened way to say ‘non-binary.’ It refers to someone whose gender doesn’t sit exclusively in the male or female categories."
  },
  "pop": { partOfSpeech: "verb", definition: "In Dandy’s World, to ‘pop’ a machine just means to work on or complete it." },
  "med": { partOfSpeech: "noun", definition: "Short for medkit or healthkit — the healing item used to restore health." },
  "band": { partOfSpeech: "noun", definition: "Band is short for bandage. A small healing item used for quick patch-ups." },
  "rox": { partOfSpeech: "noun", definition: "A negative slang word used in some communities to call someone a pedophile." },
  "glis": { partOfSpeech: "verb", definition: "To glis means the twisted is in a passive ‘glistening’ state and not aggressive yet." },
  "babysit": { partOfSpeech: "verb", definition: "To stay near a glistening twisted to keep it passive so teammates can work on objectives." },
  "distract": { partOfSpeech: "verb", definition: "To intentionally get the twisted’s attention and keep it busy so others can stay safe." },
  "distractor": { partOfSpeech: "noun", definition: "The person doing the distracting — basically baiting the twisted." },
  "extract": { partOfSpeech: "verb", definition: "Another word for fixing a machine or generator in Dandy’s World." },
  "extractor": { partOfSpeech: "noun", definition: "Someone (or a group) actively repairing the machines." },
  "backup": { partOfSpeech: "noun", definition: "An extra support player that steps in if someone else can’t distract or heal." },
  "gte": { partOfSpeech: "callout", definition: "‘Go to elevator’ — a quick callout used when it’s time to head out." },
  "eae": { partOfSpeech: "callout", definition: "‘Everyone at elevator’ — used to check if the whole team has arrived." },
  "tne": { partOfSpeech: "callout", definition: "‘Twisteds near elevator’ — a warning that monsters are nearby." },
  "ele": { partOfSpeech: "abbreviation", definition: "Short for elevator — commonly used in quick callouts." },
  "panic mode": { partOfSpeech: "noun", definition: "A phase after all machines are completed where players have about 25 seconds to run to the elevator or die." },
  "twisteds": { partOfSpeech: "noun", definition: "The general name for the group of monsters in Dandy’s World." },
  "twisted": { partOfSpeech: "noun", definition: "One individual monster from the Dandy’s World roster." },
  "machines": { partOfSpeech: "noun", definition: "Generators that must be repaired. They sometimes trigger a skillcheck mini-game." },
  "skillcheck": { partOfSpeech: "noun", definition: "A timed mini-game that appears during extraction where you need to hit a button at the correct moment." },
  "qwel": { partOfSpeech: "noun", definition: "Nickname of a Puerto Rican woman who works as an admin/developer for Blushcrunch Studio." },
  "qwelver": { partOfSpeech: "noun", definition: "A more playful/friendly variation of ‘Qwel’ used by the community." }
};

async function searchWord() {
  const rawWord = inputField.value.trim();
  if (!rawWord) { resultDiv.style.display = "none"; return; }
  const word = rawWord.toLowerCase();
  let html = "";

  if (customDefinitions[word]) {
    const def = customDefinitions[word];
    html += `<div class="word">${rawWord} <button class="speak-button" onclick="speak('${rawWord}')">&#128266;</button></div>`;
    html += `<div class="partOfSpeech">${def.partOfSpeech}</div><div class="definition">${def.definition}</div>`;
  } else {
    try {
      const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
      if (!response.ok) throw new Error("API error");
      const data = await response.json();
      if (Array.isArray(data) && data.length > 0) {
        const entry = data[0];
        html += `<div class="word">${entry.word} <button class="speak-button" onclick="speak('${entry.word}')">&#128266;</button></div>`;
        if (entry.phonetics && entry.phonetics.length > 0) {
          const phoneticText = entry.phonetics.find(p => p.text)?.text || "";
          if (phoneticText) html += `<div class="phonetic">${phoneticText}</div>`;
        }
        entry.meanings.forEach(meaning => {
          html += `<div class="partOfSpeech">${meaning.partOfSpeech}</div>`;
          meaning.definitions.forEach((def, idx) => {
            html += `<div class="definition">${idx + 1}. ${def.definition}</div>`;
          });
        });
      } else {
        html = `<div class="error">No definition found for "${rawWord}".</div>`;
      }
    } catch {
      html = `<div class="error">Error fetching definition.</div>`;
    }
  }
  resultDiv.innerHTML = html;
  resultDiv.style.display = "block";
}

function speak(word) {
  if (!window.speechSynthesis) return alert("Speech not supported.");
  const utterance = new SpeechSynthesisUtterance(word);
  window.speechSynthesis.speak(utterance);
}

function createBubble() {
  const bubble = document.createElement("div");
  bubble.classList.add("bubble");

  const size = Math.random() * 20 + 15;
  bubble.style.width = `${size}px`;
  bubble.style.height = `${size}px`;
  bubble.style.left = `${Math.random() * 100}%`;
  bubble.style.animationDuration = `${Math.random() * 10 + 10}s`;
  bubble.style.opacity = Math.random() * 0.4 + 0.3;

  document.getElementById("bubbles").appendChild(bubble);

  setTimeout(() => { bubble.remove(); }, 15000);
}

inputField.addEventListener("keydown", function (e) {
  if (e.key === "Enter") {
    createBubble();
    searchWord();
  }
});
</script>

</body>
</html>
